# example-circleci-config-merge

Example the usage of [circleci-config-merge](https://github.com/suzuki-shunsuke/circleci-config-merge).

## How to update .cirleci/config.yml

.circleci/config.yml is split per service.

```
.circleci/
  base-config.yml # config which is independent of each service
service-1/
  circleci/
    config.yml
service-2/
  circleci/
    config.yml
```

Update split files and run `make circleci` and commit both split files and `.circleci/config.yml`.

```
$ make circleci
```

## CI

In CI, the test is run to confirm whether `.circleci/config.yml` is generated by split files.
`circleci-config-merge` doesn't provide such a feature, but you can implement the test with the other tool like [dyff](https://github.com/homeport/dyff).

Please see [ci/test-circleci-config.sh](ci/test-circleci-config.sh).

It is helpful to send a guide when CI fails.
In this example, this feature is implemented with [github-comment](https://github.com/suzuki-shunsuke/github-comment).

## LICENSE

[MIT](LICNSE)
